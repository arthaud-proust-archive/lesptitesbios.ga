{"version":3,"sources":["webpack:///./src/views/Auth/Login.vue?ff50","webpack:///src/views/Auth/Login.vue","webpack:///./src/views/Auth/Login.vue?a175","webpack:///./src/views/Auth/Login.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","attrs","directives","name","rawName","value","expression","domProps","on","$event","type","indexOf","_k","keyCode","key","postLogin","target","composing","showPwd","Array","isArray","password","_i","$$a","$$el","$$c","checked","$$v","$$i","concat","slice","_q","staticStyle","_s","staticRenderFns","component"],"mappings":"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","file":"js/chunk-2d21e6fb.b1f8c957.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('main',{staticClass:\"hide-overflow\"},[_c('div',{staticClass:\"auth\"},[_c('form',[_c('h1',[_vm._v(\"Accès admin\")]),_c('label',{attrs:{\"for\":\"name\"}},[_vm._v(\"Nom d'utilisateur\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.name),expression:\"name\"}],attrs:{\"type\":\"text\",\"id\":\"name\",\"placeholder\":\"Name\"},domProps:{\"value\":(_vm.name)},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.postLogin($event)},\"input\":function($event){if($event.target.composing){ return; }_vm.name=$event.target.value}}}),_c('br'),_c('label',{attrs:{\"for\":\"password\"}},[_vm._v(\"Mot de passe\")]),((_vm.showPwd?'text':'password')==='checkbox')?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.password),expression:\"password\"}],attrs:{\"id\":\"password\",\"placeholder\":\"Password\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.password)?_vm._i(_vm.password,null)>-1:(_vm.password)},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.postLogin($event)},\"change\":function($event){var $$a=_vm.password,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.password=$$a.concat([$$v]))}else{$$i>-1&&(_vm.password=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.password=$$c}}}}):((_vm.showPwd?'text':'password')==='radio')?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.password),expression:\"password\"}],attrs:{\"id\":\"password\",\"placeholder\":\"Password\",\"type\":\"radio\"},domProps:{\"checked\":_vm._q(_vm.password,null)},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.postLogin($event)},\"change\":function($event){_vm.password=null}}}):_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.password),expression:\"password\"}],attrs:{\"id\":\"password\",\"placeholder\":\"Password\",\"type\":_vm.showPwd?'text':'password'},domProps:{\"value\":(_vm.password)},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.postLogin($event)},\"input\":function($event){if($event.target.composing){ return; }_vm.password=$event.target.value}}}),_c('sup',{staticStyle:{\"cursor\":\"pointer\",\"text-align\":\"right\",\"margin-right\":\"5px\"},on:{\"click\":function($event){_vm.showPwd = !_vm.showPwd}}},[_vm._v(_vm._s(_vm.showPwd?'Cacher le mot de passe':'Afficher le mot de passe'))]),_c('br'),_c('input',{attrs:{\"type\":\"button\",\"value\":\"Login\"},on:{\"click\":_vm.postLogin}}),_c('BarLoader',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"margin\":\"0 auto\",\"border-radius\":\"5px, display: none\"},attrs:{\"height\":2,\"width\":100}}),_c('sup',{staticStyle:{\"text-align\":\"center\"}},[_c('router-link',{attrs:{\"to\":\"/register\"}},[_vm._v(\"Créer un compte\")])],1)],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <main class=\"hide-overflow\">\r\n        <div class=\"auth\">\r\n            <form>\r\n                <h1>Accès admin</h1>\r\n                <label for=\"name\">Nom d'utilisateur</label>\r\n                <input type=\"text\" v-model=\"name\" id=\"name\" placeholder=\"Name\" @keyup.enter=\"postLogin\">\r\n                <br>\r\n                <label for=\"password\">Mot de passe</label>\r\n                <input :type=\"showPwd?'text':'password'\" v-model=\"password\" id=\"password\" placeholder=\"Password\" @keyup.enter=\"postLogin\">\r\n                <sup style=\"cursor:pointer; text-align:right; margin-right:5px\" @click=\"showPwd = !showPwd\">{{showPwd?'Cacher le mot de passe':'Afficher le mot de passe'}}</sup>\r\n                <br>\r\n                <input type=\"button\" value=\"Login\" @click=\"postLogin\" >\r\n                <BarLoader :height=2 :width=100 v-show=\"loading\" style=\"margin: 0 auto; border-radius:5px, display: none\"></BarLoader>\r\n                <sup style=\"text-align:center\"><router-link to=\"/register\">Créer un compte</router-link></sup>\r\n            </form>\r\n        </div>\r\n    </main>\r\n</template>\r\n<script>\r\nimport { mapGetters, mapActions } from 'vuex'\r\nimport axios from 'axios'\r\n\r\n\r\nexport default {\r\n    data () {\r\n        return {\r\n            name: '',\r\n            showPwd: false,\r\n            password: '',\r\n            loading: false\r\n        }\r\n    },\r\n    computed: {\r\n        ...mapGetters('jwt',[\r\n            'jwt',\r\n            'jwtSubject',\r\n            'jwtIssuer'\r\n        ]),\r\n        ...mapGetters('api', [\r\n            'apiPath'\r\n        ])\r\n    },\r\n    methods: {\r\n        ...mapActions('jwt',[\r\n            'setJwt',\r\n            'setLevel',\r\n            'checkJwt'\r\n        ]),\r\n        ...mapActions('alert',[\r\n            'newAlert'\r\n        ]),\r\n        ...mapActions('users',[\r\n            'setCurrentUser'\r\n        ]),\r\n        // Pushes posts to the server when called.\r\n        postLogin () {\r\n            this.loading = true\r\n        axios({\r\n            method: 'post',\r\n            url: `${this.apiPath}/api/login`,\r\n            data: {\r\n                name: this.name,\r\n                password: this.password\r\n            }\r\n        })\r\n            .then(response => {\r\n            this.loading = false\r\n            if (response.data.status == 'success') {\r\n                this.newAlert({type:'success', content:'Connecté'})\r\n            }\r\n            if (response.data.token) {\r\n                this.setJwt(response.data.token)\r\n                this.setLevel(response.data.user.level)\r\n                this.setCurrentUser(response.data.user)\r\n                sessionStorage.setItem('tokenSession', response.data.token);\r\n                sessionStorage.setItem('user', JSON.stringify(response.data.user));\r\n                this.$router.push(this.$route.query.after? this.$route.query.after:'/')\r\n            }\r\n            if (response.data.status == 'error') {\r\n                let error = response.data.error.password ? \"Le mot de passe est requis\": (response.data.error.name ? \"Le nom est requis\":response.data.error)\r\n                this.newAlert({type:'error', content:error})\r\n            }\r\n            })\r\n            .catch(e => {\r\n                this.loading = false\r\n                this.$router.push('/error/'+e.response.status)\r\n            })\r\n        }\r\n    },\r\n    created () {\r\n        if (sessionStorage.getItem(\"tokenSession\") != null) {\r\n            this.checkJwt(sessionStorage.getItem(\"tokenSession\"))\r\n            .then(() => {\r\n                this.setCurrentUser(JSON.parse(sessionStorage.getItem(\"user\")))\r\n                this.setLevel(JSON.parse(sessionStorage.getItem(\"user\")).level)\r\n                this.newAlert({type:'success', content:'Connecté'})\r\n                this.$router.push(this.$route.query.after? this.$route.query.after:'/')\r\n            })\r\n        }\r\n        window.scrollTo(0, 0)\r\n    }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=fe33f7e0&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}