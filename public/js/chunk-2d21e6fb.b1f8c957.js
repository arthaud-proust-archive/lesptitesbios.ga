(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21e6fb"],{d60c:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("main",{staticClass:"hide-overflow"},[r("div",{staticClass:"auth"},[r("form",[r("h1",[e._v("Accès admin")]),r("label",{attrs:{for:"name"}},[e._v("Nom d'utilisateur")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{type:"text",id:"name",placeholder:"Name"},domProps:{value:e.name},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.postLogin(t)},input:function(t){t.target.composing||(e.name=t.target.value)}}}),r("br"),r("label",{attrs:{for:"password"}},[e._v("Mot de passe")]),"checkbox"===(e.showPwd?"text":"password")?r("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{id:"password",placeholder:"Password",type:"checkbox"},domProps:{checked:Array.isArray(e.password)?e._i(e.password,null)>-1:e.password},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.postLogin(t)},change:function(t){var r=e.password,s=t.target,o=!!s.checked;if(Array.isArray(r)){var a=null,n=e._i(r,a);s.checked?n<0&&(e.password=r.concat([a])):n>-1&&(e.password=r.slice(0,n).concat(r.slice(n+1)))}else e.password=o}}}):"radio"===(e.showPwd?"text":"password")?r("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{id:"password",placeholder:"Password",type:"radio"},domProps:{checked:e._q(e.password,null)},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.postLogin(t)},change:function(t){e.password=null}}}):r("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{id:"password",placeholder:"Password",type:e.showPwd?"text":"password"},domProps:{value:e.password},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.postLogin(t)},input:function(t){t.target.composing||(e.password=t.target.value)}}}),r("sup",{staticStyle:{cursor:"pointer","text-align":"right","margin-right":"5px"},on:{click:function(t){e.showPwd=!e.showPwd}}},[e._v(e._s(e.showPwd?"Cacher le mot de passe":"Afficher le mot de passe"))]),r("br"),r("input",{attrs:{type:"button",value:"Login"},on:{click:e.postLogin}}),r("BarLoader",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticStyle:{margin:"0 auto","border-radius":"5px, display: none"},attrs:{height:2,width:100}}),r("sup",{staticStyle:{"text-align":"center"}},[r("router-link",{attrs:{to:"/register"}},[e._v("Créer un compte")])],1)],1)])])},o=[],a=(r("8e6e"),r("ac6a"),r("456d"),r("7f7f"),r("bd86")),n=r("2f62"),i=r("bc3a"),c=r.n(i);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){Object(a["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p={data:function(){return{name:"",showPwd:!1,password:"",loading:!1}},computed:u({},Object(n["c"])("jwt",["jwt","jwtSubject","jwtIssuer"]),{},Object(n["c"])("api",["apiPath"])),methods:u({},Object(n["b"])("jwt",["setJwt","setLevel","checkJwt"]),{},Object(n["b"])("alert",["newAlert"]),{},Object(n["b"])("users",["setCurrentUser"]),{postLogin:function(){var e=this;this.loading=!0,c()({method:"post",url:"".concat(this.apiPath,"/api/login"),data:{name:this.name,password:this.password}}).then((function(t){if(e.loading=!1,"success"==t.data.status&&e.newAlert({type:"success",content:"Connecté"}),t.data.token&&(e.setJwt(t.data.token),e.setLevel(t.data.user.level),e.setCurrentUser(t.data.user),sessionStorage.setItem("tokenSession",t.data.token),sessionStorage.setItem("user",JSON.stringify(t.data.user)),e.$router.push(e.$route.query.after?e.$route.query.after:"/")),"error"==t.data.status){var r=t.data.error.password?"Le mot de passe est requis":t.data.error.name?"Le nom est requis":t.data.error;e.newAlert({type:"error",content:r})}})).catch((function(t){e.loading=!1,e.$router.push("/error/"+t.response.status)}))}}),created:function(){var e=this;null!=sessionStorage.getItem("tokenSession")&&this.checkJwt(sessionStorage.getItem("tokenSession")).then((function(){e.setCurrentUser(JSON.parse(sessionStorage.getItem("user"))),e.setLevel(JSON.parse(sessionStorage.getItem("user")).level),e.newAlert({type:"success",content:"Connecté"}),e.$router.push(e.$route.query.after?e.$route.query.after:"/")})),window.scrollTo(0,0)}},l=p,w=r("2877"),m=Object(w["a"])(l,s,o,!1,null,null,null);t["default"]=m.exports}}]);
//# sourceMappingURL=chunk-2d21e6fb.b1f8c957.js.map